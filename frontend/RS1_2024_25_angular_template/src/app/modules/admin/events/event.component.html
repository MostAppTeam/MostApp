<div id="events-container">
  <!-- Display user info in the corner -->
  <div class="user-info">
    <p><strong>Logged in as:</strong> {{ loggedInUser?.username || 'Guest' }}</p>
    <p><strong>Role:</strong> {{ loggedInUser?.isAdmin ? 'Admin' : loggedInUser?.isManager ? 'Manager' : 'User' }}</p>
  </div>

  <!-- Sort Events -->
  <div id="sort-container">
    <h3>Sort Events</h3>
    <select [(ngModel)]="sortOption" (change)="applySorting()">
      <option value="nameAsc">Name (A-Z)</option>
      <option value="nameDesc">Name (Z-A)</option>
      <option value="dateAsc">Date (Newest First)</option>
      <option value="dateDesc">Date (Oldest First)</option>
    </select>
  </div>

  <h3>Existing Events</h3>
  <div *ngIf="filteredEvents.length > 0; else noEventsMessage" class="event-cards">
    <div class="event-card" *ngFor="let event of filteredEvents">
      <h4>{{ event.name }}</h4>
      <p>{{ event.description }}</p>
      <p><strong>Date:</strong> {{ event.date }}</p>
      <p><strong>Location:</strong> {{ event.location }}</p>

      <button *ngIf="isAdminOrManager" (click)="editEvent(event)">Edit</button>
      <button *ngIf="isAdminOrManager" (click)="deleteEvent(event.id)">Delete</button>
    </div>
  </div>

  <ng-template #noEventsMessage>
    <p>No events available.</p>
  </ng-template>

  <!-- Add New Event (only for Admin/Managers) -->
  <div *ngIf="isAdminOrManager">
    <form (ngSubmit)="addEvent()" id="add-event-form" #eventForm="ngForm">
      <h3>Add Event</h3>
      <input [(ngModel)]="newEvent.name" placeholder="Event Name" name="name" required />
      <input [(ngModel)]="newEvent.date" placeholder="Date" name="date" required type="date" />
      <input [(ngModel)]="newEvent.location" placeholder="Location" name="location" required />
      <textarea [(ngModel)]="newEvent.description" placeholder="Description" name="description" required></textarea>
      <button type="submit">Add Event</button>
    </form>
  </div>

  <!-- Filter Events -->
  <div id="filter-container">
    <h3>Filter Events</h3>
    <input [(ngModel)]="filterParams.name" placeholder="Event Name" name="filterName" />
    <input [(ngModel)]="filterParams.date" placeholder="Date" name="filterDate" type="date" />
    <input [(ngModel)]="filterParams.location" placeholder="Location" name="filterLocation" />
    <input [(ngModel)]="filterParams.description" placeholder="Description" name="filterDescription" />
    <button (click)="applyFilter()">Apply Filter</button>
  </div>




  <!-- Feedback message -->
  <div *ngIf="feedbackMessage" class="feedback-message">
    <p>{{ feedbackMessage }}</p>
  </div>

  <!-- Map -->
  <div id="map" style="height: 400px;"></div>
</div>
